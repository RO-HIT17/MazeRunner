<!DOCTYPE html>
<html>
<head>
    <title>Maze Generator</title>
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <h1>Maze Generator</h1>
    <canvas id="mazeCanvas" width="500" height="500"></canvas>
    <script src="maze.js"></script>
    <script>
        const WIDTH = 20;
        const HEIGHT = 20;
        const cellSize = 25;

        Maze().then(Module => {
            Module._generateMaze();
            console.log('WASM Module Loaded');
            const mazePtr = Module._getMaze();
            const mazeSize = WIDTH * HEIGHT;
            const mazeData = new Uint8Array(Module.HEAP8.buffer, mazePtr, mazeSize);

            const canvas = document.getElementById('mazeCanvas');
            const ctx = canvas.getContext('2d');

            for (let i = 0; i < mazeSize; i++) {
                const x = i % WIDTH;
                const y = Math.floor(i / WIDTH);
                ctx.fillStyle = mazeData[i] ? 'black' : 'white';
                ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);
            }
        });
    </script>
</body>
</html>